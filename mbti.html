<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-MBTI 테스트 (한국인 맞춤형)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        .question-card {
            transition: all 0.3s ease-in-out;
            transform: translateY(20px);
            opacity: 0;
            animation: fadeIn 0.5s forwards;
        }
        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .radio-label:has(input:checked) {
            background-color: #be185d;
            color: white;
            border-color: #be185d;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1f2937;
        }
        ::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen flex items-center justify-center p-4">

    <div id="main-menu" class="text-center">
        <h1 class="text-4xl md:text-5xl font-bold mb-2 text-pink-400">K-MBTI 진단</h1>
        <p class="text-lg text-gray-300 mb-8">한국인의 정서와 문화를 반영한 MBTI 테스트</p>
        <button onclick="startTest()" class="bg-pink-600 hover:bg-pink-700 text-white font-bold py-3 px-8 rounded-full text-lg transition-transform transform hover:scale-105 shadow-lg shadow-pink-500/50">
            테스트 시작하기
        </button>
    </div>

    <div id="test-container" class="hidden w-full max-w-2xl mx-auto">
        <div class="bg-gray-800 p-6 sm:p-8 rounded-2xl shadow-2xl">
            <div id="progress-bar" class="w-full bg-gray-700 rounded-full h-2.5 mb-6">
                <div class="bg-pink-600 h-2.5 rounded-full transition-all duration-300" style="width: 0%"></div>
            </div>
            <div id="question-container">
                <!-- 질문이 여기에 삽입됩니다 -->
            </div>
            <div class="flex justify-between mt-8">
                <button id="prev-btn" onclick="prevQuestion()" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-6 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed">이전</button>
                <button id="next-btn" onclick="nextQuestion()" class="bg-pink-600 hover:bg-pink-700 text-white font-bold py-2 px-6 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed">다음</button>
            </div>
        </div>
    </div>

    <div id="result-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="bg-gray-800 rounded-2xl shadow-2xl w-full max-w-2xl p-6 sm:p-8 transform transition-all scale-95 opacity-0 max-h-[90vh] overflow-y-auto">
            <div class="text-center">
                <p class="text-gray-400 text-lg">당신의 K-MBTI 유형은...</p>
                <h2 id="result-type" class="text-5xl font-extrabold my-2 text-pink-400"></h2>
                <h3 id="result-subtitle" class="text-2xl font-semibold text-gray-200 mb-6"></h3>
            </div>
            <div id="result-description" class="text-gray-300 space-y-4 leading-relaxed">
                <!-- 결과 설명이 여기에 삽입됩니다 -->
            </div>
            <div class="mt-8 text-center">
                <button onclick="closeResult()" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-8 rounded-full text-lg transition">닫기</button>
            </div>
        </div>
    </div>


    <script>
        const mainMenu = document.getElementById('main-menu');
        const testContainer = document.getElementById('test-container');
        const resultModal = document.getElementById('result-modal');

        const questions = [
            { question: "회식 자리에서 갑자기 장기자랑을 시킨다면?", yes: 'E', no: 'I' },
            { question: "눈치가 빠른 편이라, 다른 사람의 기분을 잘 알아챈다.", yes: 'N', no: 'S' },
            { question: "친구가 '나 요즘 힘들어'라고 할 때, 해결책부터 제시한다.", yes: 'T', no: 'F' },
            { question: "여행 계획을 짤 때, 분 단위로 세세하게 계획을 세운다.", yes: 'J', no: 'P' },
            { question: "혼자 있는 시간은 나에게 최고의 힐링이다.", yes: 'I', no: 'E' },
            { question: "새로운 사람을 만나는 것은 즐겁고 에너지를 준다.", yes: 'E', no: 'I' },
            { question: "나는 '숲'보다는 '나무'를 보는 경향이 있다. (현실적, 구체적)", yes: 'S', no: 'N' },
            { question: "나는 '나무'보다는 '숲'을 보는 경향이 있다. (이상적, 추상적)", yes: 'N', no: 'S' },
            { question: "친구가 잘못된 결정을 내렸을 때, 직설적으로 조언하는 편이다.", yes: 'T', no: 'F' },
            { question: "과정보다 결과가 더 중요하다고 생각한다.", yes: 'T', no: 'F' },
            { question: "갑작스러운 약속이나 계획 변경에 스트레스를 받는다.", yes: 'J', no: 'P' },
            { question: "계획에 없던 즉흥적인 만남이나 여행을 즐긴다.", yes: 'P', no: 'J' }
        ];

        const results = {
            ISTJ: { subtitle: "세상의 소금형", description: "한 번 시작한 일은 끝까지 해내는 책임감 강한 타입. 겉으로는 무뚝뚝해 보이지만 속정 깊은 '츤데레'. 회식 때 조용히 고기 굽는 역할 담당." },
            ISFJ: { subtitle: "임금 뒷편의 권력형", description: "겸손하고 성실하며, 주변 사람을 잘 챙기는 따뜻한 마음의 소유자. 남에게 싫은 소리 잘 못해서 속으로 끙끙 앓을 때가 많음. '괜찮아'가 입버릇." },
            INFJ: { subtitle: "예언자형", description: "남들은 모르는 깊은 통찰력과 이상을 가지고 있음. 사람들의 가능성을 중요하게 생각하며, 공동체의 이익을 우선함. 가끔은 너무 많은 생각에 잠겨 현실과 동떨어질 때도." },
            INTJ: { subtitle: "과학자형", description: "독창적이고 논리적인 사상가. 전체적인 그림을 보고 전략을 짜는 데 능숙함. '이게 왜 안돼?'라며 비효율적인 것을 참지 못함. 감정 표현은 서툴지만, 한번 마음을 열면 깊은 관계를 맺음." },
            ISTP: { subtitle: "백과사전형", description: "조용하고 과묵하지만, 관심 분야에 대해서는 전문가 수준의 지식을 가짐. 손재주가 좋고, 위기 상황에서 침착하게 문제를 해결. '일단 해보자' 정신이 강함." },
            ISFP: { subtitle: "성인군자형", description: "겸손하고 온화하며, 갈등을 싫어하는 평화주의자. 현재를 즐기는 욜로(YOLO)족. 말없이 주변 사람을 돕지만, 자신의 공을 내세우지 않음." },
            INFP: { subtitle: "잔다르크형", description: "이상적인 세상을 꿈꾸는 낭만가. 자신의 가치관과 신념을 중요하게 생각함. 공감 능력이 뛰어나 다른 사람의 감정을 잘 이해하지만, 상처도 잘 받음. MBTI '과몰입' 대표주자." },
            INTP: { subtitle: "아이디어뱅크형", description: "지적 호기심이 왕성하고, 논리적인 분석을 즐김. 흥미 있는 분야는 밤을 새워서라도 파고드는 덕후 기질이 있음. 사회적인 관습이나 규율에 얽매이는 것을 싫어함." },
            ESTP: { subtitle: "활동가형", description: "에너지가 넘치고, 스릴을 즐기는 모험가. 사람들과 어울리는 것을 좋아하며, 분위기 메이커 역할을 함. 이론보다는 직접 부딪히며 배우는 스타일." },
            ESFP: { subtitle: "사교형", description: "타고난 인싸(insider). 사람들의 주목을 받는 것을 즐기며, 어떤 자리에서든 분위기를 띄움. 정이 많고, 주변 사람을 즐겁게 해주는 것을 좋아함. 충동구매의 왕." },
            ENFP: { subtitle: "스파크형", description: "열정적이고 창의적인 아이디어가 넘침. 긍정적인 에너지로 주변에 활기를 불어넣음. 사람들과 깊은 관계 맺는 것을 좋아하지만, 반복적인 일상에는 쉽게 싫증을 느낌." },
            ENTP: { subtitle: "발명가형", description: "넘치는 아이디어와 재치 있는 입담으로 토론을 즐기는 것을 좋아함. 똑똑하고 박식하며, 기존의 틀을 깨는 것을 두려워하지 않음. '굳이?'라는 말을 자주 사용." },
            ESTJ: { subtitle: "사업가형", description: "현실적이고 추진력이 강한 리더. 조직을 체계적으로 관리하고, 목표를 달성하는 데 뛰어난 능력을 보임. '라떼는 말이야'를 시전할 가능성 높음." },
            ESFJ: { subtitle: "친선도모형", description: "정이 많고, 사람들과의 관계를 중요하게 생각하는 사교계의 왕. 다른 사람을 돕는 것에서 큰 기쁨을 느낌. '오지랖'이 넓다는 소리를 듣기도 함." },
            ENFJ: { subtitle: "언변능숙형", description: "사람들에게 긍정적인 영향을 미치는 카리스마 넘치는 리더. 다른 사람의 성장을 돕고, 집단의 화합을 이끌어냄. 가끔은 남을 너무 의식해서 자신을 돌보지 못할 때도." },
            ENTJ: { subtitle: "지도자형", description: "타고난 통솔력과 결단력으로 집단을 이끄는 지도자. 비전을 제시하고, 목표 달성을 위해 사람들을 움직이게 함. '내가 다 알아서 할게' 스타일. 효율성을 중시하며, 감정적인 부분은 등한시할 수 있음." }
        };

        let currentQuestion = 0;
        let userAnswers = {};

        function startTest() {
            mainMenu.classList.add('hidden');
            testContainer.classList.remove('hidden');
            currentQuestion = 0;
            userAnswers = {};
            displayQuestion();
        }

        function showMainMenu() {
            testContainer.classList.add('hidden');
            mainMenu.classList.remove('hidden');
        }

        function displayQuestion() {
            const q = questions[currentQuestion];
            const savedAnswer = userAnswers[currentQuestion];
            const questionHTML = `
                <div class="question-card">
                    <p class="text-gray-400 text-sm mb-2">질문 ${currentQuestion + 1}/${questions.length}</p>
                    <h2 class="text-2xl md:text-3xl font-bold mb-6 text-gray-100">${q.question}</h2>
                    <div class="space-y-4">
                        <label class="radio-label flex items-center p-4 border-2 border-gray-600 rounded-lg cursor-pointer transition hover:border-pink-500">
                            <input type="radio" name="answer" value="yes" class="hidden" onchange="handleAnswerChange()" ${savedAnswer === 'yes' ? 'checked' : ''}>
                            <span class="flex-grow text-lg">예</span>
                            <span class="w-6 h-6 rounded-full border-2 border-gray-400 flex items-center justify-center">
                                <span class="w-3 h-3 rounded-full bg-white hidden"></span>
                            </span>
                        </label>
                        <label class="radio-label flex items-center p-4 border-2 border-gray-600 rounded-lg cursor-pointer transition hover:border-pink-500">
                            <input type="radio" name="answer" value="no" class="hidden" onchange="handleAnswerChange()" ${savedAnswer === 'no' ? 'checked' : ''}>
                            <span class="flex-grow text-lg">아니오</span>
                            <span class="w-6 h-6 rounded-full border-2 border-gray-400 flex items-center justify-center">
                                <span class="w-3 h-3 rounded-full bg-white hidden"></span>
                            </span>
                        </label>
                    </div>
                </div>
            `;
            document.getElementById('question-container').innerHTML = questionHTML;
            updateProgressBar();
            updateNavButtons();
        }

        function handleAnswerChange() {
            const selected = document.querySelector('input[name="answer"]:checked');
            if (selected) {
                userAnswers[currentQuestion] = selected.value;
            }
            updateNavButtons();
        }
        
        function updateProgressBar() {
            const progress = ((currentQuestion) / questions.length) * 100;
            document.querySelector('#progress-bar > div').style.width = `${progress}%`;
        }

        function updateNavButtons() {
            document.getElementById('prev-btn').disabled = currentQuestion === 0;
            const nextBtn = document.getElementById('next-btn');
            
            if (currentQuestion === questions.length - 1) {
                nextBtn.textContent = '결과 보기';
            } else {
                nextBtn.textContent = '다음';
            }

            if (userAnswers[currentQuestion]) {
                nextBtn.disabled = false;
            } else {
                nextBtn.disabled = true;
            }
        }

        function nextQuestion() {
            if (!userAnswers[currentQuestion]) return;

            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                displayQuestion();
            } else {
                calculateResult();
            }
        }

        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                displayQuestion();
            }
        }

        function calculateResult() {
            const scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            
            Object.keys(userAnswers).forEach(qIndex => {
                const question = questions[qIndex];
                const answer = userAnswers[qIndex];
                const scoreKey = answer === 'yes' ? question.yes : question.no;
                scores[scoreKey]++;
            });

            let resultType = '';
            resultType += scores.E > scores.I ? 'E' : 'I';
            resultType += scores.S > scores.N ? 'S' : 'N';
            resultType += scores.T > scores.F ? 'T' : 'F';
            resultType += scores.J > scores.P ? 'J' : 'P';
            
            displayResult(resultType);
        }

        function displayResult(type) {
            const resultData = results[type];
            document.getElementById('result-type').textContent = type;
            document.getElementById('result-subtitle').textContent = resultData.subtitle;
            document.getElementById('result-description').innerHTML = `<p>${resultData.description.replace(/\n/g, '</p><p>')}</p>`;

            resultModal.classList.remove('hidden');
            setTimeout(() => {
                resultModal.querySelector('div').classList.remove('scale-95', 'opacity-0');
            }, 10);
        }

        function closeResult() {
            resultModal.querySelector('div').classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                resultModal.classList.add('hidden');
                showMainMenu();
            }, 300);
        }
    </script>

</body>
</html>
